# Упражнение на чтение кода. 
# Распознавание образов c помощью библиотеки OpenCV

Скрипт для распознавания объектов на видео. В данной программе можно определить следующие объекты:

* лицо: анфас и профиль
* глаза


Для работы нужны Python3, библиотека OpenCV версии не ниже 3 и хотя бы одна веб-камера.

Архив c кодом необходимо скачать и распаковать в любую удобную директорию.
Запускаем командную строку или среду выполнения и переходим в директорию проекта(команда cd).

Устанавливаем зависимости из файла requirements.txt
```Python
pip install -r requirements.txt
```

После этого можно запустить программу:
```
python run.py
```
Должна включится веб-камера, на видео появятся результаты распознавания.


## run.py
Основной скрипт

После запуска скрипта активируется веб-камера. Если камеру активировать не удалось, то появляется сообщение об ошибке "Couldn't find your webcam... Sorry :c"
Если камера работает, то изображение с камеры конвертируется в черно-белое с помощью встроенной функции cvtColor()
В переменной CASCADES сохранены каскады Хаара для объектов, которые мы будем определять.
Функция detectMultiScale() принимает на вход черно-белое изображение и находит объекты из CASCADES и возвращает списки прямоугольников с данными объектами, по которым функция draw_square отрисовывает прямоугольники вокруг объектов.

### Функции 

###  is_user_wants_quit()

Возвращает True, если была нажата клавиша q при просмотре видео. Программа завершает работу.

###  show_frame(frame):

Выводит на экран изображение переданное в аргументе frame. Для вывода используется встроенная функция imshow библиотеки opencv.

### draw_sqare(frame, color)

Отрисовывает квадраты цвета color на изображении frame. Для отрисовки используется функция rectangle библиотеки opencv.

### get_cascades()

Загружает классификаторы Хаара для объектов, а также цвета для прямоугольников, которые будут выделять каждый из объектов.
Загружаются только классификаторы у которых параметр draw имеет значение True.


## config.py
Файл для настройки объектов для распознавания.

Содержит словарь CASCADES со списком объектов, которые будет определять программа, ссылками на классификаторы Хаара для данных объектов и цветами прямоугольников, которые будут выделять каждый объект.
Словарь содержит следующую информацию:
```Python
# 1 элемент словаря:
    "Face front": { # название объекта, который распознаем, здесь лицо в анфас
         # путь к классификатору Хаара для распознавания лица в анфас
        "path": "haarcascades/faces/haarcascade_frontalface_default.xml",
         # Цвет рамки, которая будет выделять объект, в данном случае красный
        "color": (255, 0, 0),
        "draw": True # нужно ли отрисовывать рамку вокруг объекта, True - да, False - нет
    }
```

Если нужно добавить новый объект для распознавания, например, автомобильные номера РФ, то:
* проверим есть ли в папке haarcascades нужный классификатор russian_plate_number. Если нет, то скачиваем xml файл из открытых источников и сохранияем в 
  любую удобную директорию.
* создаем новый объект словаря:
  ```Python
  "Russian Plate":{ # название объекта для распознавания
       # путь к классификатору для распознавания автомобильных номеров(можно создать новую папку)
      "path": "/haarcascades/faces/haarcascade_russian_plate_number.xml" 
      "color": (255, 69, 0) # цвет рамки для выделения объекта - оранжевый
      "draw": True # рамку отрисовываем
   }
   ```
  
  Новый элемент нужно добавить в словарь CASCADES.
  
      












